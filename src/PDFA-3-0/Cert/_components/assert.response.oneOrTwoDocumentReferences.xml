<?xml version="1.0" encoding="UTF-8"?>
<nts:component xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
    <action>
        <assert>
            <description value="Confirm that the response Bundle contains 1 DocumentReference resource, or 2 if the server doesn't support the 'entered-in-error' status and defaults to 'current'."/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(DocumentReference)).count() in (1 | 2)"/>
        </assert>
    </action>
    <action>
        <assert>
            <description value="Confirm that all the DocumentReference resources in the Bundle have the status 'current'. This check is needed to make sure that servers which don't support the 'entered-in-error' status and default to 'current' actually only return DocumentReferences with this status."/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(DocumentReference)).all(resource.status = 'current')"/>
        </assert>
    </action>
</nts:component>
