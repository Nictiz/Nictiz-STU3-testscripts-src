<?xml version="1.0" encoding="UTF-8"?>
<!--
    The step in the eOverdracht flow where the receiving XIS reads a Task in the "accepted" state. The result will be cached in the 'get-accepted-task-response' fixture.
    @param scenarioId - The id of the scenorio.
    @param patientName - The family name of the patient.
-->
<nts:component xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
    <nts:include value="action.sendNotification.receivingxis">
        <nts:with-parameter name="name" value="Send notification for new Task"/>
    </nts:include>
    
    <test id="{$scenarioId}-GetTask">
        <name value="{$scenarioId} - Get eOverdracht Task for patient {$patientName}"/>
        <description value="Test receiving XIS to get the eOverdracht Task. A notification will be sent to the endpoint specified during the setup."/>
        <nts:include value="test.readTask.receivingxis">
            <nts:with-parameter name="expectedStatus" value="accepted"/>
            <nts:with-parameter name="responseId" value="get-accepted-task-response"/>
        </nts:include>
    </test>
</nts:component>