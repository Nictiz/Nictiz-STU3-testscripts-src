<?xml version="1.0" encoding="UTF-8"?>
<!--
    The step in the eOverdracht flow where the sending XIS serves a Task in the "accepted" state. The result will be cached in the 'get-accepted-task-response' fixture.
    @param scenarioId - The id of the scenorio.
    @param patientName - The family name of the patient.
-->
<nts:component xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
    <nts:include value="action.awaitNotification.sendingxis" nts:in-targets="#default">
        <nts:with-parameter name="name" value="Await notification for new Task"/>
    </nts:include>
    
    <test id="{$scenarioId}-ServeTask">
        <name value="{$scenarioId} - Serve eOverdracht Task for patient {$patientName}"/>
        <description value="Test sending XIS to serve the eOverdracht Task."/>
        <nts:include value="test.readTask.sendingxis">
            <nts:with-parameter name="expectedStatus" value="accepted"/>
            <nts:with-parameter name="responseId" value="get-accepted-tasks-response"/>
        </nts:include>
    </test>
</nts:component>

