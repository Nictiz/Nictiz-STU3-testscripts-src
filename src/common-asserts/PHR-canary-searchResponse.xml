<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../../general/schematron/NictizTestScript.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<!--
    "Canary" component to test if WildFHIR behaves correctly for searches during PHR tests.
-->
<nts:component  xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
    <nts:include value="PHR-canary-response" scope="common"/>
    <action>
        <assert>
            <description value="Make sure that the test server (WildFHIR) returns a Bundle."/>
            <direction value="response"/>
            <resource value="Bundle"/>
        </assert>
    </action>
    <action>
        <assert>
            <description value="Make sure that Bundle returned by the test server (WildFHIR) is a searchset Bundle."/>
            <direction value="response"/>
            <expression value="Bundle.type"/>
            <operator value="equals"/>
            <value value="searchset"/>
        </assert>
    </action>
</nts:component>