<?xml-model href="http://hl7.org/fhir/STU3/testscript.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TestScript xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir http://hl7.org/fhir/STU3/testscript.xsd" xmlns="http://hl7.org/fhir">
  <id value="Images-1-0-0-load-resources-purgecreateupdate-xml"/>
  <url value="http://nictiz.nl/fhir/TestScript/Images-1-0-0-load-resources-purgecreateupdate-xml"/>
  <version value="stu3-1.0.1"/>
  <name value="NictizImages-1-0-0Load Test Resources - Purge Create Update - XML"/>
  <status value="active"/>
  <date value="2021-02-11"/>
  <publisher value="Nictiz"/>
  <contact>
    <name value="Nictiz"/>
    <telecom>
      <system value="email"/>
      <value value="kwalificatie@nictiz.nl"/>
      <use value="work"/>
    </telecom>
  </contact>
  <description value="Load Images-1-0-0 test resources using the update (PUT) operation of the target FHIR server for use in Images-1-0-0 qualification testing. All resource ids are pre-defined. The target XIS FHIR server is expected to support resource create via the update (PUT) operation for client assigned ids. "/>
  <copyright value="Â© Nictiz 2018"/>
  <fixture id="Binary-images-Binary-01-fx">
    <resource>
      <reference value="../_reference/resources/images-Binary-01.xml"/>
    </resource>
  </fixture>
  <fixture id="Binary-images-Binary-02-fx">
    <resource>
      <reference value="../_reference/resources/images-Binary-02.xml"/>
    </resource>
  </fixture>
  <fixture id="Binary-images-Binary-03-fx">
    <resource>
      <reference value="../_reference/resources/images-Binary-03.xml"/>
    </resource>
  </fixture>
  <fixture id="Binary-images-Binary-04-fx">
    <resource>
      <reference value="../_reference/resources/images-Binary-04.xml"/>
    </resource>
  </fixture>
  <fixture id="Binary-images-Binary-05-fx">
    <resource>
      <reference value="../_reference/resources/images-Binary-05.xml"/>
    </resource>
  </fixture>
  <fixture id="List-collection-images-fx">
    <resource>
      <reference value="../_reference/resources/images-List-01.xml"/>
    </resource>
  </fixture>
  <fixture id="List-one-image-fx">
    <resource>
      <reference value="../_reference/resources/images-List-02.xml"/>
    </resource>
  </fixture>
  <fixture id="Media-images-Media-01-fx">
    <resource>
      <reference value="../_reference/resources/images-Media-01.xml"/>
    </resource>
  </fixture>
  <fixture id="Media-images-Media-02-fx">
    <resource>
      <reference value="../_reference/resources/images-Media-02.xml"/>
    </resource>
  </fixture>
  <fixture id="Media-images-Media-03-fx">
    <resource>
      <reference value="../_reference/resources/images-Media-03.xml"/>
    </resource>
  </fixture>
  <fixture id="Media-images-Media-04-fx">
    <resource>
      <reference value="../_reference/resources/images-Media-04.xml"/>
    </resource>
  </fixture>
  <fixture id="Media-images-Media-05-fx">
    <resource>
      <reference value="../_reference/resources/images-Media-05.xml"/>
    </resource>
  </fixture>
  <fixture id="Patient-images-nl-core-patient-01-fx">
    <resource>
      <reference value="../_reference/resources/images-nl-core-patient-01.xml"/>
    </resource>
  </fixture>
  <fixture id="Practitioner-images-nl-core-pracitioner-01-fx">
    <resource>
      <reference value="../_reference/resources/images-nl-core-practitioner-01.xml"/>
    </resource>
  </fixture>
  <fixture id="PractitionerRole-images-nl-core-practitionerrole-01-fx">
    <resource>
      <reference value="../_reference/resources/images-nl-core-practitionerrole-01.xml"/>
    </resource>
  </fixture>
  <fixture id="Patient-XXX-TEST-C-fx">
    <resource>
      <reference value="../_reference/resources/images-nl-core-patient-01.xml" />
    </resource>
  </fixture>
  <fixture id="images-nl-core-patient-01-XXX-TEST-C-token">
    <resource>
      <reference value="../_reference/resources/images-patient-01-token.xml" />
    </resource>
  </fixture>
  <variable>
    <name value="Binary-images-Binary-01-id"/>
    <expression value="Binary.id"/>
    <sourceId value="Binary-images-Binary-01-fx"/>
  </variable>
  <variable>
    <name value="Binary-images-Binary-02-id"/>
    <expression value="Binary.id"/>
    <sourceId value="Binary-images-Binary-02-fx"/>
  </variable>
  <variable>
    <name value="Binary-images-Binary-03-id"/>
    <expression value="Binary.id"/>
    <sourceId value="Binary-images-Binary-03-fx"/>
  </variable>
  <variable>
    <name value="Binary-images-Binary-04-id"/>
    <expression value="Binary.id"/>
    <sourceId value="Binary-images-Binary-04-fx"/>
  </variable>
  <variable>
    <name value="Binary-images-Binary-05-id"/>
    <expression value="Binary.id"/>
    <sourceId value="Binary-images-Binary-05-fx"/>
  </variable>
  <variable>
    <name value="List-collection-images-id"/>
    <expression value="List.id"/>
    <sourceId value="List-collection-images-fx"/>
  </variable>
  <variable>
    <name value="List-one-image-id"/>
    <expression value="List.id"/>
    <sourceId value="List-one-image-fx"/>
  </variable>
  <variable>
    <name value="Media-images-Media-01-id"/>
    <expression value="Media.id"/>
    <sourceId value="Media-images-Media-01-fx"/>
  </variable>
  <variable>
    <name value="Media-images-Media-02-id"/>
    <expression value="Media.id"/>
    <sourceId value="Media-images-Media-02-fx"/>
  </variable>
  <variable>
    <name value="Media-images-Media-03-id"/>
    <expression value="Media.id"/>
    <sourceId value="Media-images-Media-03-fx"/>
  </variable>
  <variable>
    <name value="Media-images-Media-04-id"/>
    <expression value="Media.id"/>
    <sourceId value="Media-images-Media-04-fx"/>
  </variable>
  <variable>
    <name value="Media-images-Media-05-id"/>
    <expression value="Media.id"/>
    <sourceId value="Media-images-Media-05-fx"/>
  </variable>
  <variable>
    <name value="Patient-images-nl-core-patient-01-id"/>
    <expression value="Patient.id"/>
    <sourceId value="Patient-images-nl-core-patient-01-fx"/>
  </variable>
  <variable>
    <name value="Practitioner-images-nl-core-pracitioner-01-id"/>
    <expression value="Practitioner.id"/>
    <sourceId value="Practitioner-images-nl-core-pracitioner-01-fx"/>
  </variable>
  <variable>
    <name value="PractitionerRole-images-nl-core-practitionerrole-01-id"/>
    <expression value="PractitionerRole.id"/>
    <sourceId value="PractitionerRole-images-nl-core-practitionerrole-01-fx"/>
  </variable>
  <variable>
    <name value="Patient-XXX-TEST-C-fx-id" />
    <expression value="Patient.id" />
    <sourceId value="Patient-XXX-TEST-C-fx" />
  </variable>
  <variable>
    <name value="images-nl-core-patient-01-XXX-TEST-C-token-id"/>
    <expression value="Patient.id"/>
    <sourceId value="images-nl-core-patient-01-XXX-TEST-C-token"/>
  </variable>
  <variable>
    <name value="T"/>
    <defaultValue value="${CURRENTDATETIME}"/>
    <description value="DateTime that data and queries are expected to be relative to."/>
  </variable>
  <setup>
    <action>
      <operation>
        <type>
          <system value="http://touchstone.com/fhir/extended-operation-codes"/>
          <code value="purge"/>
        </type>
        <resource value="Patient"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/$purge"/>
        <requestHeader>
          <!-- 0..* Each operation can have one or more header elements -->
          <field value="Authorization"/>
          <!-- 1..1 HTTP header field name: OAuth access token -->
          <value value="${images-nl-core-patient-01-XXX-TEST-C-token-id}"/>
          <!-- 1..1 HTTP headerfield value: UUID4 -->
        </requestHeader>
        <sourceId value="Patient-XXX-TEST-C-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 204(No Content)"/>
        <operator value="in"/>
        <responseCode value="200,204"/>
      </assert>
    </action>
  </setup>  
  <test id="Step1-LoadTestResourceCreate">
    <name value="Step1-LoadTestResourceCreate"/>
    <description value="Load Images-1-0-0 test resources using the update (PUT) operation of the target FHIR server for use in Images-1-0-0 qualification testing. All resource ids are pre-defined. The target XIS FHIR server is expected to support resource create via the update (PUT) operation for client assigned ids. "/>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Binary"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Binary-images-Binary-01-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Binary-images-Binary-01-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Binary"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Binary-images-Binary-02-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Binary-images-Binary-02-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Binary"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Binary-images-Binary-03-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Binary-images-Binary-03-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Binary"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Binary-images-Binary-04-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Binary-images-Binary-04-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Binary"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Binary-images-Binary-05-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Binary-images-Binary-05-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="List"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${List-collection-images-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="List-collection-images-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="List"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${List-one-image-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="List-one-image-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Media"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Media-images-Media-01-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Media-images-Media-01-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Media"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Media-images-Media-02-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Media-images-Media-02-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Media"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Media-images-Media-03-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Media-images-Media-03-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Media"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Media-images-Media-04-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Media-images-Media-04-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Media"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Media-images-Media-05-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Media-images-Media-05-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Patient"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Patient-images-nl-core-patient-01-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Patient-images-nl-core-patient-01-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="Practitioner"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${Practitioner-images-nl-core-pracitioner-01-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="Practitioner-images-nl-core-pracitioner-01-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes"/>
          <code value="updateCreate"/>
        </type>
        <resource value="PractitionerRole"/>
        <accept value="xml"/>
        <contentType value="xml"/>
        <params value="/${PractitionerRole-images-nl-core-practitionerrole-01-id}"/>
        <requestHeader>
          <field value="Authorization"/>
          <value value="Bearer d9f8d61b-c236-489f-aba5-b3bebd312c30"/>
        </requestHeader>
        <sourceId value="PractitionerRole-images-nl-core-practitionerrole-01-fx"/>
      </operation>
    </action>
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 200(OK) or 201(Created)."/>
        <operator value="in"/>
        <responseCode value="200,201"/>
      </assert>
    </action>
  </test>
</TestScript>